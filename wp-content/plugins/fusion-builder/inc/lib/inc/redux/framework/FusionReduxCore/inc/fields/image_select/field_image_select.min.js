!function(e){"use strict";fusionredux.field_objects=fusionredux.field_objects||{},fusionredux.field_objects.image_select=fusionredux.field_objects.image_select||{},e(document).ready(function(){}),fusionredux.field_objects.image_select.init=function(i){i||(i=e(document).find(".fusionredux-group-tab:visible").find(".fusionredux-container-image_select:visible")),e(i).each(function(){var i=e(this),t=i;i.hasClass("fusionredux-field-container")||(t=i.parents(".fusionredux-field-container:first")),t.is(":hidden")||t.hasClass("fusionredux-field-init")&&(t.removeClass("fusionredux-field-init"),i.find(".fusionredux-image-select label img, .fusionredux-image-select label .tiles").click(function(t){var s=e(this).closest("label").attr("for");if(e(this).parents("fieldset:first").find(".fusionredux-image-select-selected").removeClass("fusionredux-image-select-selected").find("input[type='radio']").attr("checked",!1),e(this).closest("label").find('input[type="radio"]').prop("checked"),e(this).closest("label").hasClass("fusionredux-image-select-preset-"+s)){t.preventDefault();var n=e(this).closest("label").find("input"),o=n.data("presets"),l=n.data("merge");if(void 0!==l&&null!==l&&("string"===e.type(l)&&(l=l.split("|")),e.each(o,function(i,t){!0!==l&&-1==e.inArray(i,l)||"object"!==e.type(fusionredux.options[i])||(o[i]=e.extend(fusionredux.options[i],o[i]))})),void 0!==n&&null!==n)confirm(fusionredux.args.preset_confirm)&&(i.find('label[for="'+s+'"]').addClass("fusionredux-image-select-selected").find("input[type='radio']").attr("checked",!0),window.onbeforeunload=null,0===e("#import-code-value").length?e(this).append('<textarea id="import-code-value" style="display:none;" name="'+fusionredux.args.opt_name+'[import_code]">'+JSON.stringify(o)+"</textarea>"):e("#import-code-value").val(JSON.stringify(o)),0!==e("#publishing-action #publish").length?e("#publish").click():e("#fusionredux-import").click());return!1}i.find('label[for="'+s+'"]').addClass("fusionredux-image-select-selected").find("input[type='radio']").attr("checked",!0).trigger("change"),fusionredux_change(e(this).closest("label").find('input[type="radio"]'))}),i.find(".tiles").qtip({content:{text:function(i,t){return"<img src='"+e(this).attr("rel")+"' style='max-width:150px;' alt='' />"}},style:"qtip-tipsy",position:{my:"top center",at:"bottom center"}}))})}}(jQuery);